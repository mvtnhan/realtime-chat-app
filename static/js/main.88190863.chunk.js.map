{"version":3,"sources":["services/firebase.js","pages/Chat.js","helpers/auth.js","pages/Signup.js","pages/Login.js","App.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","databaseURL","auth","db","database","Chat","props","state","user","currentUser","chats","content","readError","writeError","handleChange","bind","handleSubmit","ref","on","snapshot","arr","forEach","snap","push","val","setState","error","this","message","event","target","value","preventDefault","timestamp","Date","now","uid","className","map","chat","key","onSubmit","onChange","type","email","Component","signInWithGoogle","provider","GoogleAuthProvider","signInWithPopup","signInWithGitHub","GithubAuthProvider","SignUp","password","googleSignIn","githubSignIn","name","createUserWithEmailAndPassword","to","placeholder","onClick","Login","signInWithEmailAndPassword","autoComplete","PrivateRoute","component","authenticated","rest","render","pathname","from","location","PublicRoute","App","loading","onAuthStateChanged","exact","path","Signup","ReactDOM","basename","document","getElementById"],"mappings":"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","file":"static/js/main.88190863.chunk.js","sourcesContent":["import firebase from 'firebase';\r\n\r\nconst config = {\r\n    apiKey: \"AIzaSyDWKvkWv9oBrmkCC9QUPWBguGuWHTIVd04\",\r\n    authDomain: \"chatty-dd8e6.firebaseapp.com\",\r\n    databaseURL: \"https://chatty-dd8e6.firebaseio.com\"\r\n  };\r\n  firebase.initializeApp(config);\r\n  export const auth = firebase.auth;\r\n  export const db = firebase.database();","import React, {Component} from \"react\";\r\nimport {auth} from \"../services/firebase\";\r\nimport {db} from \"../services/firebase\";\r\nimport \"./Chat.css\";\r\n\r\nexport default class Chat extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n        user: auth().currentUser,\r\n        chats: [],\r\n        content: '',\r\n        readError: null,\r\n        writeError: null\r\n        };\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n    }\r\n\r\n    async componentDidMount() {\r\n      try {\r\n        db.ref(\"chats\").on(\"value\", snapshot => {\r\n          let arr = [];\r\n          snapshot.forEach((snap) => {\r\n            arr.push(snap.val());\r\n          });\r\n          this.setState({ chats: arr });\r\n        });\r\n      } catch (error) {\r\n        this.setState({ readError: error.message });\r\n      }\r\n    }\r\n\r\n    handleChange(event) {\r\n        this.setState({\r\n            content: event.target.value\r\n        });\r\n    }\r\n\r\n    async handleSubmit(event) {\r\n        event.preventDefault();\r\n        this.setState({ writeError: null });\r\n        try {\r\n            await db.ref(\"chats\").push({\r\n            content: this.state.content,\r\n            timestamp: Date.now(),\r\n            uid: this.state.user.uid\r\n            });\r\n            this.setState({ content: '' });\r\n        } catch (error) {\r\n            this.setState({ writeError: error.message });\r\n        }\r\n    }\r\n\r\n    render(){\r\n        return (\r\n            <div className=\"FormChat\">\r\n              <div className=\"FormContentChat\">\r\n                {this.state.chats.map(chat => {\r\n                  if(chat.uid === this.state.user.uid){\r\n                    return <p className=\"MyChat\" key={chat.timestamp}>{chat.content}</p>\r\n                  }else{\r\n                    return <p className=\"TheyChat\" key={chat.timestamp}>{chat.content}</p>\r\n                  }\r\n                  // if chat.uid == this.state.userid\r\n                \r\n                })}\r\n              </div>\r\n              {/* form mess */}\r\n              <form className=\"btnSend\" onSubmit={this.handleSubmit}>\r\n                <input onChange={this.handleChange} value={this.state.content}></input>\r\n                {this.state.error ? <p>{this.state.writeError}</p> : null}\r\n                <button type=\"submit\">Send</button>\r\n                <div>\r\n                Login in as: <strong>{this.state.user.email}</strong>\r\n              </div>\r\n              </form>\r\n              \r\n            </div>\r\n          );\r\n    }\r\n\r\n}","import { auth } from \"../services/firebase\";\r\n\r\nexport function signup(email, password) {\r\n  return auth().createUserWithEmailAndPassword(email, password);\r\n}\r\n\r\nexport function signin(email, password) {\r\n  return auth().signInWithEmailAndPassword(email, password);\r\n}\r\n\r\nexport function signInWithGoogle(){\r\n  const provider = new auth.GoogleAuthProvider();\r\n  return auth().signInWithPopup(provider);\r\n}\r\n\r\nexport function signInWithGitHub(){\r\n  const provider = new auth.GithubAuthProvider();\r\n  return auth().signInWithPopup(provider);\r\n}","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { signup } from \"../helpers/auth\";\r\nimport { signInWithGoogle, signInWithGitHub } from \"../helpers/auth\";\r\nimport \"./signup.css\";\r\n\r\nexport default class SignUp extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      error: null,\r\n      email: \"\",\r\n      password: \"\",\r\n    };\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.googleSignIn = this.googleSignIn.bind(this);\r\n    this.githubSignIn = this.githubSignIn.bind(this);\r\n  }\r\n\r\n  handleChange(event) {\r\n    this.setState({\r\n      [event.target.name]: event.target.value,\r\n    });\r\n  }\r\n\r\n  async handleSubmit(event) {\r\n    event.preventDefault();\r\n    this.setState({ error: \"\" });\r\n    try {\r\n      await signup(this.state.email, this.state.password);\r\n    } catch (error) {\r\n      this.setState({ error: error.message });\r\n    }\r\n  }\r\n\r\n  async googleSignIn() {\r\n    try {\r\n      await signInWithGoogle();\r\n    } catch (error) {\r\n      this.setState({ error: error.message });\r\n    }\r\n  }\r\n\r\n  async githubSignIn() {\r\n    try {\r\n      await signInWithGitHub();\r\n    } catch (error) {\r\n      this.setState({ error: error.message });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"Signup\">\r\n        <form onSubmit={this.handleSubmit}>\r\n          <h1>\r\n            Sigin Up to\r\n            <Link to=\"/\"> Chatty </Link>\r\n          </h1>\r\n          <p>Fill in the form below to create an account.</p>\r\n          <div>\r\n            <input\r\n              placeholder=\"Email\"\r\n              name=\"email\"\r\n              type=\"email\"\r\n              onChange={this.handleChange}\r\n              value={this.state.email}\r\n            ></input>\r\n          </div>\r\n          <div>\r\n            <input\r\n              placeholder=\"PassWord\"\r\n              name=\"password\"\r\n              type=\"password\"\r\n              onChange={this.handleChange}\r\n              value={this.state.password}\r\n            ></input>\r\n          </div>\r\n          <div className=\"btn\">\r\n            {this.state.error ? <p>{this.state.error}</p> : null}\r\n            <button type=\"submit\">Sigin up</button>\r\n            <p>Or</p>\r\n            <button onClick={this.googleSignIn} type=\"button\">\r\n              Sigin up with Google\r\n            </button>\r\n            <button type=\"button\" onClick={this.githubSignIn}>\r\n              Sign Up with GitHub\r\n            </button>\r\n          </div>\r\n          <hr></hr>\r\n          <p>\r\n            Already have an account? <Link to=\"/login\">Login</Link>\r\n          </p>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { signin } from \"../helpers/auth\";\r\nimport \"./login.css\";\r\n\r\nexport default class Login extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      error: null,\r\n      email: \"\",\r\n      password: \"\",\r\n    };\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n  }\r\n\r\n  handleChange(event) {\r\n    this.setState({\r\n      [event.target.name]: event.target.value,\r\n    });\r\n  }\r\n\r\n  async handleSubmit(event) {\r\n    event.preventDefault();\r\n    this.setState({ error: \"\" });\r\n    try {\r\n      await signin(this.state.email, this.state.password);\r\n    } catch (error) {\r\n      this.setState({ error: error.message });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"Login\">\r\n        <form\r\n          className=\"FormLogin\"\r\n          autoComplete=\"off\"\r\n          onSubmit={this.handleSubmit}\r\n        >\r\n          <h1>\r\n            <Link to=\"/\">Chatty</Link>\r\n          </h1>\r\n          <p>Fill in the form below to login to your account.</p>\r\n          <div>\r\n            <input\r\n              placeholder=\"Email\"\r\n              name=\"email\"\r\n              type=\"email\"\r\n              onChange={this.handleChange}\r\n              value={this.state.email}\r\n            />\r\n          </div>\r\n          <div>\r\n            <input\r\n              placeholder=\"Password\"\r\n              name=\"password\"\r\n              onChange={this.handleChange}\r\n              value={this.state.password}\r\n              type=\"password\"\r\n            />\r\n          </div>\r\n          <div>\r\n            {this.state.error ? <p>{this.state.error}</p> : null}\r\n            <button type=\"submit\">Login</button>\r\n          </div>\r\n          <hr />\r\n          <p>\r\n            Don't have an account? <Link to=\"/signup\">Sign up</Link>\r\n          </p>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Route, Switch, Redirect } from \"react-router-dom\";\r\nimport Chat from \"./pages/Chat\";\r\nimport Signup from \"./pages/Signup\";\r\nimport Login from \"./pages/Login\";\r\nimport { auth } from \"./services/firebase\";\r\n\r\nfunction PrivateRoute({ component: Component, authenticated, ...rest }) {\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) =>\r\n        authenticated === true ? (\r\n          <Component {...props} />\r\n        ) : (\r\n          <Redirect\r\n            to={{ pathname: \"/login\", state: { from: props.location } }}\r\n          />\r\n        )\r\n      }\r\n    />\r\n  );\r\n}\r\n//nhận 3 tham sô: component để render nếu điều kiện true, trạng thái xác thực và rest(ES6),\r\n//kiểm tra nếu authenticated true và render component, nếu không nó sẽ chuyển hướng đến /login.\r\n\r\nfunction PublicRoute({ component: Component, authenticated, ...rest }) {\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) =>\r\n        authenticated === false ? (\r\n          <Component {...props} />\r\n        ) : (\r\n          <Redirect to=\"/chat\" />\r\n        )\r\n      }\r\n    />\r\n  );\r\n}\r\n// <PublicRoute> khá giống <PrivateRoute>.\r\n//Nó render các public routes và chuyển hướng đến đường dẫn /chat nếu authenticated state đúng.\r\n\r\nclass App extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      authenticated: false,\r\n      loading: true,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    auth().onAuthStateChanged((user) => {\r\n      if (user) {\r\n        this.setState({\r\n          authenticated: true,\r\n          loading: false,\r\n        });\r\n      } else {\r\n        this.setState({\r\n          authenticated: false,\r\n          loading: false,\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return this.state.loading === true ? (\r\n      <h2>Loading...</h2>\r\n    ) : (\r\n      <Switch>\r\n        <Redirect exact from=\"/\" to=\"/login\" />\r\n        <PrivateRoute\r\n          path=\"/chat\"\r\n          authenticated={this.state.authenticated}\r\n          component={Chat}\r\n        ></PrivateRoute>\r\n        <PublicRoute\r\n          path=\"/signup\"\r\n          authenticated={this.state.authenticated}\r\n          component={Signup}\r\n        ></PublicRoute>\r\n        <PublicRoute\r\n          path=\"/login\"\r\n          authenticated={this.state.authenticated}\r\n          component={Login}\r\n        ></PublicRoute>\r\n      </Switch>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\n\r\nReactDOM.render(\r\n  <BrowserRouter basename=\"/realtime-chat-app\">\r\n    <App />\r\n  </BrowserRouter>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\n"],"sourceRoot":""}